<!-- Nav bar -->
<!-- hidden on small devices -->
<nav class="relative bg-[#252525] border-t border-gray-800">
  <div class="mx-auto hidden h-12 w-full max-w-[1200px] items-center md:flex px-5">
    <!-- Categories Dropdown Button -->
    <button (click)="toggleMenu()" #menu
      class="flex h-full w-40 cursor-pointer items-center justify-center bg-transparent text-gray-300 hover:text-white hover:bg-[#333] transition-colors gap-2 text-sm font-medium">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="h-6 w-6 text-[#ff5500]">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
      </svg>
      Categorías
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"
        stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
      </svg>
    </button>

    <!-- Centered specific links? Or just list them. Image shows "INICIO Catálogo Nosotros Contáctanos" somewhat centered or next to categories. 
         The design image shows "INICIO Catálogo Nosotros Contáctanos" in the center-left area, next to categories? 
         Actually, looking closely at the image: 
         Left: [Hamburger] Categorias v
         Center: INICIO Catálogo Nosotros Contáctanos
         Right: Iniciar sesión Registrarse
    -->
    <div class="flex-1 flex justify-center gap-8">
      <a class="text-sm font-medium text-gray-300 hover:text-white hover:underline transition-colors" routerLink="/"
        routerLinkActive="text-[#ff5500] uppercase tracking-wide hover:opacity-80 transition-opacity">Inicio</a>
      <a class="text-sm font-medium text-gray-300 hover:text-white hover:underline transition-colors"
        routerLink="/catalog"
        routerLinkActive="text-[#ff5500] uppercase tracking-wide hover:opacity-80 transition-opacity">Catálogo</a>
      <a class="text-sm font-medium text-gray-300 hover:text-white hover:underline transition-colors"
        routerLink="/about-us"
        routerLinkActive="text-[#ff5500] uppercase tracking-wide hover:opacity-80 transition-opacity">Nosotros</a>
      <a class="text-sm font-medium text-gray-300 hover:text-white hover:underline transition-colors"
        routerLink="/contact-us"
        routerLinkActive="text-[#ff5500] uppercase tracking-wide hover:opacity-80 transition-opacity">Contáctanos</a>
    </div>

    <!-- Auth Links -->
    @if (!islogin()) {
    <div class="ml-auto flex gap-6 px-0 text-sm font-medium">
      <a class="text-gray-300 hover:text-white transition-colors" routerLink="/login">Iniciar sesión</a>
      <a class="text-gray-300 hover:text-white transition-colors" routerLink="/signup">Registrarse</a>
    </div>
    } @else {
    <div class="ml-auto flex gap-4 px-0 text-sm font-medium">
      <a class="text-gray-300 hover:text-[#ff5500] transition-colors cursor-pointer" (click)="logout()">Cerrar
        sesión</a>
    </div>
    }
  </div>
</nav>
<!-- /Nav bar -->

@if (toggleBurgerMenu) {

<!-- Menu Dropdown (Desktop) -->
<section class="absolute top-12 left-0 z-50 w-full bg-white shadow-xl border-t border-gray-100" #menudeploy>
  <!-- Centered container to align with navbar max-width -->
  <div class="mx-auto max-w-[1200px] flex flex-row h-96">

    <!-- Categories List -->
    <div class="w-64 bg-gray-50 border-r border-gray-100 py-4 overflow-y-auto">
      <ul class="space-y-1 px-2">
        @for (category of categories; track $index) {
        <li
          class="flex items-center justify-between px-4 py-3 rounded-md cursor-pointer transition-all duration-200 text-sm font-medium"
          [class]="{
            'bg-white text-[#ff5500] shadow-sm border-l-4 border-[#ff5500]': selectedCategory === category.name,
            'text-gray-600 hover:bg-gray-100 hover:text-black': selectedCategory !== category.name
          }" (click)="selectedCategory = category.name">
          {{ category.name }}
          <svg *ngIf="selectedCategory === category.name" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </li>
        }
      </ul>
    </div>

    <!-- Subcategories Display -->
    <div class="flex-1 bg-white p-6 md:p-8 overflow-y-auto">
      <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-2">{{ selectedCategory }}</h3>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-y-4 gap-x-8">
        @for (sub of selectedSubcategories; track $index) {
        <a [href]="'catalog?brand='+sub" (click)="toggleMenu()"
          class="flex items-center gap-2 text-gray-600 hover:text-[#ff5500] transition-colors text-sm group">
          <span class="w-1.5 h-1.5 bg-gray-300 rounded-full group-hover:bg-[#ff5500] transition-colors"></span>
          {{ sub }}
        </a>
        }
      </div>

      <!-- Optional: Add a "View all" link or promotional image here if matches design -->
      <div class="mt-10 pt-6 border-t border-gray-100">
        <a routerLink="/catalog" [queryParams]="{categorie: selectedCategory}" (click)="toggleMenu()"
          class="inline-flex items-center text-[#ff5500] font-semibold hover:underline">
          Ver todo en {{ selectedCategory }}
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>

  </div>
</section>

<!-- /Menu  -->
}